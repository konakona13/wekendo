<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="LEE-Mapper">
	<cache />
	<insert id="memberInsert" parameterType="Member">
		insert into
		member(MEMBER_NUM,MEMBER_ID,MEMBER_PW,MEMBER_NAME,MEMBER_PH,
		MEMBER_ADDR,MEMBER_EMAIL,GENDER,MEMBER_PHOTO,MEMBER_BIRTH,
		MEMBER_STATUS)
		values ('NM'|| MEMBER_NUM_seq.nextval,
		#{memberId},#{memberPw},#{memberName}, #{memberPh1}
		, #{addr},
		#{email},#{gender}, #{fileName}, #{memberBir}, '정상' )
	</insert>

	<sql id="basecolumn">
		MEMBER_NUM,MEMBER_ID,MEMBER_PW,MEMBER_NAME,MEMBER_PH,
		MEMBER_ADDR,MEMBER_EMAIL,GENDER,MEMBER_PHOTO,MEMBER_BIRTH,
		MEMBER_STATUS
	</sql>
	<sql id="basecolumnCompany">
		COMPANY_NUM, COMPANY_KIND, COMPANY_ID, COMPANY_PW,
		COMPANY_BN, COMPANY_NAME, COMPANY_CAP, COMPANY_PH, COMPANY_EMAIL,
		MANAGER_NAME, COMPANY_ADDR, COMPANY_BANK, COMPANY_ACC, COMPANY_STATUS
	</sql>
	<sql id="basecolumnDo">
		DO_NUM, HOST_NUM, DO_NAME, DO_START_DATE, DO_END_DATE,
		DO_OPEN_DATE,
		DO_CLOSE_DATE, DO_PP, DO_NOWPP, DO_DETAIL, DO_OPT_GENDER,
		DO_OPT_AGE,
		DO_STATUS
	</sql>
	<sql id="basecolumnCashin">
		CASHIN_NUM, PAY_NUM, COMPANY_NUM, CASHIN_TOTAL_PRICE,
		CASHIN_COMMISSION, CASHIN_BALANCE, CASHIN_DAYS, CASHIN_MONTH,
		CASHIN_STATUS
	</sql>
	<sql id="basecolumnBuybuy">
		BUY_NUM, DO_NUM, PAY_NUM, HOST_NUM, GOODS_NUM, COMPANY_NUM,
		MAP_L_NUM, MAP_M_NUM, MAP_S_NUM, THEME_L_NUM, THEME_M_NUM,
		THEME_S_NUM, BUY_QTY, BUY_START_DATE, BUY_END_DATE, BUY_DAYS,
		BUY_PRICE
	</sql>

	<resultMap type="Member" id="baseMember">
		<id column="MEMBER_NUM" jdbcType="VARCHAR" property="memberNum" />
		<result column="MEMBER_NAME" jdbcType="VARCHAR"
			property="memberName" />
		<result column="MEMBER_BIRTH" jdbcType="TIMESTAMP"
			property="memberBir" />
		<result column="MEMBER_PH" jdbcType="BIGINT"
			property="memberPh1" />
		<result column="MEMBER_EMAIL" jdbcType="VARCHAR"
			property="email" />
		<result column="MEMBER_ADDR" jdbcType="VARCHAR" property="addr" />
		<result column="GENDER" jdbcType="VARCHAR" property="gender" />
		<result column="MEMBER_PHOTO" jdbcType="VARCHAR"
			property="fileName" />
		<result column="MEMBER_STATUS" jdbcType="VARCHAR"
			property="status" />
		<result column="MEMBER_ID" jdbcType="VARCHAR"
			property="memberId" />
		<result column="MEMBER_PW" jdbcType="VARCHAR"
			property="memberPw" />
	</resultMap>

	<resultMap type="Company" id="baseCompany">
		<id column="COMPANY_NUM" jdbcType="VARCHAR" property="companyNum" />
		<result column="COMPANY_KIND" jdbcType="VARCHAR"
			property="companyKind" />
		<result column="COMPANY_ID" jdbcType="VARCHAR"
			property="companyId" />
		<result column="COMPANY_PW" jdbcType="VARCHAR"
			property="companyPw" />
		<result column="COMPANY_BN" jdbcType="VARCHAR"
			property="companyBn" />
		<result column="COMPANY_NAME" jdbcType="VARCHAR"
			property="companyName" />
		<result column="COMPANY_CAP" jdbcType="VARCHAR"
			property="companyCap" />
		<result column="COMPANY_PH" jdbcType="BIGINT"
			property="companyPh" />
		<result column="COMPANY_EMAIL" jdbcType="VARCHAR"
			property="managerEmail" />
		<result column="MANAGER_NAME" jdbcType="VARCHAR"
			property="managerName" />
		<result column="COMPANY_ADDR" jdbcType="VARCHAR"
			property="companyAddr" />
		<result column="COMPANY_BANK" jdbcType="VARCHAR"
			property="companyBank" />
		<result column="COMPANY_ACC" jdbcType="VARCHAR"
			property="companyAcc" />
		<result column="COMPANY_STATUS" jdbcType="VARCHAR"
			property="companyStatus" />
	</resultMap>

	<resultMap type="Dodo" id="baseDo">
		<id column="DO_NUM" jdbcType="VARCHAR" property="doNum" />
		<result column="HOST_NUM" jdbcType="VARCHAR" property="hostNum" />
		<result column="DO_NAME" jdbcType="VARCHAR" property="doName" />
		<result column="DO_START_DATE" jdbcType="TIMESTAMP"
			property="startDate" />
		<result column="DO_END_DATE" jdbcType="TIMESTAMP"
			property="endDate" />
		<result column="DO_OPEN_DATE" jdbcType="TIMESTAMP"
			property="openDate" />
		<result column="DO_CLOSE_DATE" jdbcType="TIMESTAMP"
			property="closeDate" />
		<result column="DO_PP" jdbcType="BIGINT" property="doPP" />
		<result column="DO_NOWPP" jdbcType="BIGINT" property="nowPP" />
		<result column="DO_DETAIL" jdbcType="VARCHAR"
			property="doDetail" />
		<result column="DO_OPT_GENDER" jdbcType="VARCHAR"
			property="optGender" />
		<result column="DO_OPT_AGE" jdbcType="VARCHAR"
			property="optAge" />
		<result column="DO_STATUS" jdbcType="VARCHAR" property="status" />
	</resultMap>

	<resultMap type="Model.DTO.LEEDTO.CashIn" id="baseCashin">
		<id column="CASHIN_NUM" jdbcType="VARCHAR" property="cashinNum" />
		<result column="PAY_NUM" jdbcType="VARCHAR" property="payNum" />
		<result column="COMPANY_NUM" jdbcType="VARCHAR"
			property="companyNum" />
		<result column="CASHIN_TOTAL_PRICE" jdbcType="BIGINT"
			property="totalPrice" />
		<result column="CASHIN_COMMISSION" jdbcType="BIGINT"
			property="commission" />
		<result column="CASHIN_BALANCE" jdbcType="BIGINT"
			property="balance" />
		<result column="CASHIN_DAYS" jdbcType="TIMESTAMP"
			property="days" />
		<result column="CASHIN_MONTH" jdbcType="TIMESTAMP"
			property="month" />
		<result column="CASHIN_STATUS" jdbcType="VARCHAR"
			property="status" />
	</resultMap>

	<resultMap type="Model.DTO.LEEDTO.Buybuy" id="baseBuybuy">
		<id column="BUY_NUM" jdbcType="VARCHAR" property="buyNum" />
		<result column="DO_NUM" jdbcType="VARCHAR" property="doNum" />
		<result column="PAY_NUM" jdbcType="VARCHAR" property="payNum" />
		<result column="HOST_NUM" jdbcType="VARCHAR" property="hostNum" />
		<result column="GOODS_NUM" jdbcType="VARCHAR"
			property="goodsNum" />
		<result column="COMPANY_NUM" jdbcType="VARCHAR"
			property="companyNum" />
		<result column="MAP_L_NUM" jdbcType="VARCHAR"
			property="mapLnum" />
		<result column="MAP_M_NUM" jdbcType="VARCHAR"
			property="mapMnum" />
		<result column="MAP_S_NUM" jdbcType="VARCHAR"
			property="mapSnum" />
		<result column="THEME_L_NUM" jdbcType="VARCHAR"
			property="themeLnum" />
		<result column="THEME_M_NUM" jdbcType="VARCHAR"
			property="themeMnum" />
		<result column="THEME_S_NUM" jdbcType="VARCHAR"
			property="themeSnum" />
		<result column="BUY_QTY" jdbcType="BIGINT" property="buyQty" />
		<result column="BUY_START_DATE" jdbcType="TIMESTAMP"
			property="startDate" />
		<result column="BUY_END_DATE" jdbcType="TIMESTAMP"
			property="endDate" />
		<result column="BUY_DAYS" jdbcType="BIGINT" property="buyDays" />
		<result column="BUY_PRICE" jdbcType="BIGINT"
			property="buyPrice" />
	</resultMap>

	<select id="userCheck" parameterType="Member"
		resultMap="baseMember">
		select
		<include refid="basecolumn" />
		from member
		where member_id = #{memberId} and member_pw = #{memberPw}
	</select>
	<select id="userCheck1" parameterType="Member"
		resultMap="baseMember">
		select
		<include refid="basecolumn" />
		from member
		where member_id = #{memberId}
	</select>

	<insert id="companyInsert" parameterType="Company">
		insert into company
		(COMPANY_NUM, COMPANY_KIND,
		COMPANY_ID, COMPANY_PW,
		COMPANY_BN,
		COMPANY_NAME, COMPANY_CAP,
		COMPANY_PH, COMPANY_EMAIL,
		MANAGER_NAME,
		COMPANY_ADDR, COMPANY_BANK,
		COMPANY_ACC, COMPANY_STATUS)
		values ('CO'||
		COMPANY_NUM_seq.nextval,
		#{companyKind},#{companyId},#{companyPw},
		#{companyBn}, #{companyName},
		#{companyCap},#{companyPh},
		#{managerEmail}, #{managerName},
		#{companyAddr},#{companyBank},#{companyAcc},#{companyStatus} )
	</insert>
	<select id="companyCheck" parameterType="Company"
		resultMap="baseCompany">
		select
		<include refid="basecolumnCompany" />
		from company
		where COMPANY_ID = #{companyId} and COMPANY_PW =
		#{companyPw}
	</select>

	<select id="getDoList" parameterType="StartEndPage"
		resultMap="baseDo">
		select * from ( select rownum rn,
		<include refid="basecolumnDo" />
		from (select
		<include refid="basecolumnDo" />
		from KENDO
		order by DO_NUM desc))
		where rn &gt;= #{startRow}
		and rn &lt;=
		#{endRow}
	</select>
	<select id="getDoListCount" resultType="int">
		select count(*) from
		KENDO
	</select>
	<select id="getDoDetail" parameterType="String"
		resultMap="baseDo">
		select
		<include refid="basecolumnDo" />
		from KENDO
		where DO_NUM = #{doNum}
	</select>

	<select id="getCashList" parameterType="StartEndPage"
		resultMap="baseCashin">
		select * from ( select rownum rn,
		<include refid="basecolumnCashin" />
		from (select
		<include refid="basecolumnCashin" />
		from cashin
		order by CASHIN_DAYS desc))
		where rn &gt;= #{startRow}
		and
		rn &lt;=
		#{endRow}
		and CASHIN_STATUS = 'complete'
	</select>
	<select id="getCashListCount" resultType="int">
		select count(*) from
		cashin
	</select>

	<select id="getBuybuyList" parameterType="startEndPage"
		resultMap="baseBuybuy">
		select * from ( select rownum rn,
		<include refid="basecolumnBuybuy" />
		from (select
		<include refid="basecolumnBuybuy" />
		from BUYBUY
		order by BUY_NUM desc))
		where rn &gt;= #{startRow}
		and
		rn &lt;=
		#{endRow}
	</select>
	<select id="getBuyListCount" resultType="int">
		select count(*) from
		BUYBUY
	</select>
</mapper>